# -*- coding: utf-8 -*-
#:import os os
#:import ModifiedNavigationDrawer libs.uix.navigationdrawer.ModifiedNavigationDrawer
#:import SingleIconItem libs.uix.lists.SingleIconItem

<NavDrawer>:
    _app: app
    on_state: root.add_name_previous_screen()
    side_panel_width:
        (self.side_panel_width * 80) // 100 \
        if self.side_panel_width >= app.window.width \
        else self.side_panel_width

    ModifiedNavigationDrawer:
        id: nav_drawer

        BoxLayout:
            id: box_avatar
            orientation: 'vertical'
            padding: dp(10)
            spacing: dp(10)
            size_hint_y: .3

            canvas.before:
                Rectangle:
                    pos: self.pos
                    size: self.size
                    source: 'data/images/bg.jpg'

            Widget:

            Label:
                id: user_name
                size_hint: None, None
                height: dp(20)
                width: self.texture_size[0]
                halign: 'left'
                text: '[b]%s[/b]\n[size=12]0.2[/size]\n' % app.title
                markup: True
                font_size: '14sp'

        ScrollView:
            id: scroll
            size_hint_y: .7

            GridLayout:
                cols: 1
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(10)

                Label:
                    events_callback: lambda x: x

                NavigationDrawerSubheader:
                    text: "Основное"

                SingleIconItem:
                    icon: 'account'
                    text: "Войти"
                    events_callback: app.show_login

                SingleIconItem:
                    icon: 'quadcopter'
                    text: "Агрегаторы"
                    events_callback: app.show_aggregators

                NavigationDrawerSubheader:
                    text: "Разделы"

                SingleIconItem:
                    icon: 'currency-btc'
                    text: "Криптотека"
                    on_release: app.root.ids.manager.current = 'cryptoteka'

                SingleIconItem:
                    icon: 'history'
                    text: "История просмотров"
                    on_release: app.root.ids.manager.current = 'view_history'

                SingleIconItem:
                    icon: 'calendar-range'
                    text: "Календарь ICO"
                    on_release: app.root.ids.manager.current = 'calendar_ico'

                SingleIconItem:
                    icon: 'home'
                    text: "Последние"
                    events_callback: app.show_last

                SingleIconItem:
                    icon: 'shuffle-variant'
                    text: "Мне повезет"
                    on_release: app.root.ids.manager.current = 'lucky'

                SingleIconItem:
                    icon: 'calendar-blank'
                    text: "По годам"
                    on_release: app.root.ids.manager.current = 'by_years'

                NavigationDrawerSubheader:
                    text: "Настройки"

                SingleIconItem:
                    icon: 'settings'
                    text: 'Настройки'
                    events_callback: app.show_settings

                SingleIconItem:
                    icon: 'web'
                    text: 'Язык'
